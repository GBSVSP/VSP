<html lang="en" xmlns="http://www.w3.org/1999/xhtml" 
				xmlns:h="http://java.sun.com/jsf/html"
	            xmlns:p="http://primefaces.org/ui" 
	            xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:body>
	<script src="js/jquery-2.0.3.js"></script>
  	<script src="js/jquery-ui.js"></script>
  	<script src="js/bootstrap.js"></script>
<h:form prependId="false"><br></br><br></br><br></br>
          <table style="align:center;top:150px;">
 <tr><td align="center"><b>DEAL MANAGEMENT</b></td></tr>   
          <tr>
              <td colspan="7"> 
               <h:selectOneRadio  id="searchType" value="#{deal.searchType}">
       <f:selectItem  itemValue="VSP_OPP_NO" itemLabel="VSP Opp No"/>
    <f:selectItem  itemValue="CLIENT" itemLabel="Client"/>
       <f:selectItem  itemValue="DEAL" itemLabel="Deal"/>
       <f:selectItem  itemValue="SALES_CONNECT_NO" itemLabel="Sales Connect No"/>
       <f:ajax event="change" listener="#{deal.typeChanged}" />
       
       </h:selectOneRadio>
        
            </td></tr>
            <tr>
           <!--  <td><h:inputText value="#{deal.searchValue}"/></td> -->
            <td>  <p:autoComplete id="dealList" value="#{deal.searchValue}" completeMethod="#{deal.getDeal}" />         
</td>
            <td><h:commandButton action="#{deal.searchDeal}"
			id="searchButton" value="Search" class="btn-default" render="dealResult" ></h:commandButton></td></tr> 
			<tr><td colspan="2"><h:outputText value="No records found" rendered="#{deal.show}"/></td></tr>
            </table>
            	 
						   <h:dataTable id="dealResult"  var="q" value="#{deal.dealList}" styleClass = "dealTable"
                    headerClass = "dealTableHeader" rendered="#{not empty deal.dealList}">   
    
  
    <h:column>
    <f:facet name = "header" style="align:left">Showing #{deal.count} results for: #{deal.searchValue} <input type="button" value="NEW DEAL FORM"/></f:facet>
    <table border="0">
    <tr><td colspan="7" align="left">VSP Number: #{q.VSP_Ref_No}   </td></tr>
    <tr><td align="left">#{q.opportunity_Description}</td></tr>
    <tr><td>Client:#{q.customer_Name}</td><td>Sales Connect No:#{q.sales_Connect_Opp_No}</td><td>TCV$ :#{q.TCV}</td>
    <td><h:commandButton action="#{deal.openDeal(q.deal_Id)}"
			id="searchButton" value="VIEW DEAL DETAILS" class="btn-default">
	
			</h:commandButton></td></tr>
    </table>
    <hr/>      
    </h:column>
       
    </h:dataTable>
      
    </h:form>

<script>
$("#searchType").click(function () {
	$("#dealList_input").val("");
}); 

</script>

</h:body>

</html>

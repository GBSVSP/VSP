<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
	<ui:composition template="commonLayout.xhtml">
		<ui:define name="content">
		<p:scrollPanel mode="native" style="position: absolute; height: 88%; width:100%;">
		<ui:include src="search.xhtml" />
			<h:form prependId="false">	
				<h:dataTable id="dealResult" var="row" value="#{deal.dealList}" headerClass="dealTableHeader">
			
					<h:column>

					<table border="0" width="55%">
							<tr>
								<td colspan="4" align="left"><b>REFERENCE NUMBER:
										#{row.reference_No}</b></td>
										<td><h:commandButton action="#{deal.newDeal}"
			class="btn-default" value=" + NEW DEAL"/></td>
							</tr>

							<tr>
								<td style="font-size:12px;width:60px">Client Name: <h:inputText value="#{row.customer_Name}"></h:inputText></td>
								<td style="font-size:12px;width:60px" align="left">Opportunity Name: <h:inputText
										value="#{row.opportunity_Name}" /></td>
								<td style="font-size:12px;width:60px" align="left">Opportunity Owner: <h:inputText
										value="#{row.opportunity_Owner}" /></td>
							</tr>
							<tr>
								<td style="font-size:12px;width:60px">Opportunity Description:<h:inputTextarea
										value="#{row.opportunity_Description}" /></td>
								<td style="font-size:12px;width:60px">Additional Contacts:<h:inputText
										value="#{row.additional_Contacts}" /></td>
								<td style="font-size:12px;width:60px">Box :<h:inputText value="#{row.box_Link}" /></td>
						</tr>


							<tr>
								<td style="font-size:12px;width:60px">IMT: <h:selectOneMenu value="#{row.imt_Id}">
										<f:selectItem itemLabel="Please Choose" itemValue="#{null}" noSelectionOption="true"/>
										<f:selectItems value="#{deal.IMTList}" immediate="true" />
									</h:selectOneMenu>
								</td>
								<td style="font-size:12px;width:60px">Sector: <h:selectOneMenu value="#{row.sector_Id}">
										<f:selectItems value="#{deal.sectorList}" immediate="true" />
									</h:selectOneMenu>
								</td>
								<td style="font-size:12px;width:60px">Led By: <h:selectOneMenu value="#{row.gbs_gts_Led}" >
										<f:selectItems value="#{deal.ledByList}" immediate="true" />
									</h:selectOneMenu>
								</td>
								</tr>
								<tr>
								<td style="font-size:12px;width:60px">SSM Stage:<h:inputText
										value="#{row.ssm_Stage}" /></td>
								<td style="font-size:12px;width:60px">SC TCV:<h:inputText
										value="#{row.tcv}" /></td>
								<td style="font-size:12px;width:60px">Sales Connect No:<h:inputText
										value="#{row.sales_Connect_No}" /></td>
							</tr>
						</table>
						<hr />


					</h:column>

				</h:dataTable>
				<ui:include src="A1Form.xhtml" />
				<ui:include src="dealInfo.xhtml" />
				<h:commandButton id="saveButton" value="SAVE CHANGES" class="btn-default" onclick="return validate()" action="#{deal.isDealExist}">
				</h:commandButton>&nbsp;&nbsp;
				<h:commandButton id="cancelButton"  value="CANCEL" class="btn-default" action="#{deal.cancelDeal}"/>
			
			<script>
					//<![CDATA[
					function validate(){
						
						//var status = $("#insertFlag").val();
						var customer_Name = $("#customer_Name").val();
						var opportunity_Name = $("#opportunity_Name").val();
						var opportunity_Description = $("#opportunity_Description").val();
						//var a1Status = $("#a1Form:j_idt61:0:a1Status").val();
						//alert("a1Status:"+a1Status);
						var status = false;
						if (customer_Name == '') {
							
			    		   	 $("#err_customer_Name").html("Cannot be Blank");
			    		   } 
						if (opportunity_Name == '') {
							
			    		   	 $("#err_opportunity_Name").html("Cannot be Blank");
			    		   } 
						if (opportunity_Description == '') {
							
			    		   	 $("#err_opportunity_Description").html("Cannot be Blank");
			    		   } 
						 /*  if (a1Status == '') {
							
								 $("#err_a1_Status").html("Cannot be Blank");
			    		   }  */ 
						 if(customer_Name != '' && opportunity_Name != '' && opportunity_Description != '' ){
							 status = true;
						 }
						 return status;
						 
			    }
					/* $(window).on("beforeunload", function() {
			            return "Are you sure? You didn't save the deal !";
			        });
			        */

					$("#cancelButton").click(function () {
						var status;
				
						status = confirm("You will lose un-saved data. Are you sure? ");
						
						return status;
					}); 
				    
					//]]>
			</script>
</h:form>
			</p:scrollPanel>
		</ui:define>

	</ui:composition>

</h:body>

</html>

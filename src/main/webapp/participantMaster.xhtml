<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
	

<h:head>
</h:head>

<h:body>
		
    <ui:composition template="commonLayout.xhtml">
    
    <ui:define name="content">
    <br></br><br></br>  
	<h:form id="participantForm"  prependId="false"> 
    <br></br><br></br>   
		<div align="center">
			<h:panelGrid columns="1">
				<h:messages for="validationMsg" id="validationMsg" style="color:red"></h:messages>
			</h:panelGrid>
			
			<h:panelGrid width="80%">
				<table border="0" width="110%">
					<tr bgcolor="grey">
						<td style="color: black; padding-left: 10px"><h4>PARTICIPANT MASTER</h4></td>				
					</tr>
				</table>
				
				<p:scrollPanel mode="native" style="width:1200px;height:320px;overflow:auto" id="divTable" >
					
					<h:dataTable id="participantResult" var="participantData"
						value="#{participant.allParticipantList}" styleClass="table table-striped tablesorter">
						<h:column>
							<f:facet name="header"></f:facet>

							<h:selectBooleanCheckbox id="checkboxClickedFlag" value="#{participantData.checkboxClickedFlag}" 
							disabled="#{participant.checkboxAllFlag}" styleClass="checkboxEventClass">
							</h:selectBooleanCheckbox>

						</h:column>

						<h:column>
						    <f:facet name="header"></f:facet>
							<h:inputHidden id="serialNo" value="#{participantData.serialNo}"></h:inputHidden>
						</h:column>

						<h:column>
							<f:facet name="header">
							<h:outputLink id="email_header" style="text-decoration:underline; font-size:13px">Email</h:outputLink>
							</f:facet>
							
							<h:outputText value="#{participantData.email}" rendered="#{participantData.serialNo != '0'}"></h:outputText>
							
						    <h:outputText style="color:red;font-size: 8pt;" id="error_email"></h:outputText>
						     <br></br>
							<h:inputText id="email" value="#{participantData.email}" style="width:140px"
								rendered="#{participant.toggleButton and participantData.checkboxClickedFlag}">
							</h:inputText>
							<h:outputText value="*" style="color:red; font-size:10pt; width:2px" rendered="#{participantData.serialNo == '0'}">
							</h:outputText> 
							 
						</h:column>


						<h:column>
							<f:facet name="header">
							<h:outputLink id="part_header" style="text-decoration:underline; font-size:13px">Participant
							</h:outputLink>
							</f:facet>

							<h:outputText value="#{participantData.user_Name}" rendered="#{participantData.serialNo != '0'}">
							</h:outputText>
							
						    <h:outputText style="color:red;font-size:8pt;" id="error_username"></h:outputText>
						    <br></br>
							<h:inputText id="username" value="#{participantData.user_Name}" style="width:120px"
								rendered="#{participant.toggleButton and participantData.checkboxClickedFlag}" a:autofocus="true" 
								a:placeholder="firstname lastname">
							</h:inputText>
							<h:outputText value="*" style="color:red; font-size: 10pt; width:2px" rendered="#{participantData.serialNo == '0'}">
							</h:outputText>
					
						</h:column>


						<h:column>
							<f:facet name="header">
							<h:outputText id="imt_header" style="font-size:13px" value="IMT"></h:outputText>
							</f:facet>
							
							<h:outputText style="color:red;font-size: 8pt;" id="error_imt_Id"></h:outputText>
							 <br></br>
							<h:selectOneMenu id="imt_Id" value="#{participantData.imt_Id}" style="width:130px">
								<f:selectItem itemLabel="Please Choose" itemValue="#{null}" noSelectionOption="true" />
								<f:selectItems value="#{participant.imtList}" />
							</h:selectOneMenu>
							<h:outputText value="*" style="color:red; font-size:8pt; width:2px" rendered="#{participantData.serialNo == '0'}">
							</h:outputText>
						</h:column>

						<h:column>
							<f:facet name="header">
							<h:outputLink id="storm_header" style="text-decoration:underline; font-size:13px;
							 white-space: pre;">Trained:<br></br><br></br>Revenue Storm</h:outputLink>
							</f:facet>
							<h:selectBooleanCheckbox id="storm_Trained" value="#{participantData.storm_Trained}" style="width:50px">
							</h:selectBooleanCheckbox>
						</h:column>

                       <h:column>
							<f:facet name="header">
							<h:outputLink id="a2_invited_header" style="text-decoration:underline; font-size:13px;
							 white-space: pre;">A2<br></br><br></br>Invited</h:outputLink></f:facet>
							<h:outputText id="a2_invited" value="#{participantData.a2_invited}" rendered="#{participantData.a2_invited != '0'}"> 
							</h:outputText>
						</h:column>
						
						<h:column>
							<f:facet name="header">
							 <h:outputLink id="a2_attended_header" style="text-decoration:underline; font-size:13px; 
							 white-space: pre;">A2<br></br><br></br>Attended</h:outputLink></f:facet>
							<h:outputText id="a2_attended" value="#{participantData.a2_attended}" rendered="#{participantData.a2_attended != '0'}"> 
							</h:outputText>
						</h:column>
						
						<h:column>
							<f:facet name="header">
							<h:outputLink id="a3_invited_header" style="text-decoration:underline; font-size:13px;
							 white-space: pre;">A3<br></br><br></br>Invited</h:outputLink></f:facet>
							<h:outputText id="a3_invited" value="#{participantData.a3_invited}" rendered="#{participantData.a3_invited != '0'}"> 
							</h:outputText>
						</h:column>
						
						<h:column>
							<f:facet name="header">
							<h:outputLink id="a3_attended_header" style="text-decoration:underline; font-size:13px; 
							white-space: pre;">A3<br></br><br></br>Attended</h:outputLink></f:facet>
							<h:outputText id="a3_attended" value="#{participantData.a3_attended}" rendered="#{participantData.a3_attended != '0'}"> 
							</h:outputText>
						</h:column>

                        <h:column>
							<f:facet name="header"></f:facet>
							<h:commandLink id="show_details" value="#{participantData.showDetails}" style="text-decoration:underline; font-size:12px" 
							rendered="#{participantData.serialNo != '0'}">
							</h:commandLink>
						</h:column>


						<h:column>
							<f:facet name="header"><h:outputText value="Sentiment?" style="font-size:13px"></h:outputText>
							</f:facet>
							
							<h:outputText style="color:red;font-size: 8pt;" id="error_sentiment_Id"></h:outputText>
							 <br></br>
							<h:selectOneMenu id="sent_Id" value="#{participantData.sentiment}" style="width:130px">
								<f:selectItem itemLabel="Please Choose" itemValue="#{null}" noSelectionOption="true" />
								<f:selectItems value="#{participant.sentimentList}" />
							</h:selectOneMenu>
							<h:outputText value="*" style="color:red; font-size:10pt; width:2px" rendered="#{participantData.serialNo == '0'}">
							</h:outputText>
						</h:column>

					</h:dataTable>
					
				</p:scrollPanel>
				<h:panelGrid width="100%" style="text-align:right;">
			      <h:outputText value="*All fields are mandatory" style="color:red;font-size:9pt;" rendered="#{participant.toggleButton}">
				  </h:outputText>
				<hr></hr>
			    </h:panelGrid>
			
			</h:panelGrid>			
			
			<h:inputHidden id="totalCheckedSize" value="#{participant.totalSize}"></h:inputHidden>
			
			<h:panelGrid columns="2" width="85%">
				<h:panelGroup>
					<h:commandButton id="newParticipantButton" value="#{participant.toggleBtnChgValue}" class="btn-default" 
					style="float:left" action="#{participant.addNewRow}" actionListener="#{participant.toggleBtnAction}">
					</h:commandButton>

					<h:commandButton id="cancelButton" value="Cancel"
						class="btn-default" style="float:left" action="#{participant.cancelSave}">
					</h:commandButton>

				</h:panelGroup>
				<h:panelGroup>
					<h:commandButton id="updateButton" value="Update User"
						class="btn-default" style="float:right" action="#{participant.updateParticipant}">
					</h:commandButton>

					<h:commandButton id="deleteButton" value="Delete User"
						class="btn-default" style="float:right" action="#{participant.deleteParticipant}">
					</h:commandButton>
				</h:panelGroup>
			</h:panelGrid>
			
			 
			<h:panelGrid>
			<h:outputScript rendered="#{participant.jscript == 'deleteInfo'}">alert("#{participant.msgAppend} #{msgbundle.participant_delete_success}");</h:outputScript>
			<h:outputScript rendered="#{participant.jscript == 'updateInfo'}">alert("#{participant.msgAppend} #{msgbundle.participant_update_success}");</h:outputScript>
			<h:outputScript rendered="#{participant.jscript == 'addNewInfo'}">alert("#{participant.msgAppend} #{msgbundle.participant_create_success}");</h:outputScript>
			<h:outputScript rendered="#{participant.jscript == 'addExistInfo'}">alert("#{participant.msgAppend} #{msgbundle.participant_exist}");</h:outputScript>
			<h:outputScript rendered="#{participant.jscript == 'error'}">alert("#{msgbundle.database_error}");</h:outputScript>
						
			</h:panelGrid>
			        
					<div class="modal fade" id="searchUserModal">
						<div class="modal-dialog">

							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title">USER SEARCH</h4>
								</div>
								<div class="modal-body">
									<div align="center">
										<table style="top: 900px;" border="0">

											<tr>
												<td align="center" colspan="3"><h:outputText
														style="color:red;font-size: 8pt;" id="err_email"></h:outputText></td>
											</tr>

											<tr>
												<td><b>Email: </b></td>
												<td><h:inputText id="userEmail"/></td>
												<td><h:commandButton id="userSearch" value="Search" class="btn-default"></h:commandButton></td>
											</tr>

											<tr>
												<td colspan="3"><h:outputText id="firstName"/></td>
											</tr>
											<tr>
												<td colspan="3"> <h:outputText id="lastName"/></td>
											</tr>
											<tr></tr>
											<tr>
												<td colspan="3">
												<h:commandButton id="addPartBtn" value="Add User" class="btn-default"
												actionListener="#{participant.toggleBtnAction}" action="#{participant.addNewRow}">
												 </h:commandButton></td>
												 
											</tr>
											<tr>
											<td>
											<h:inputHidden id="addEmail" value="#{participant.addEmail}"></h:inputHidden>
										    <h:inputHidden id="addFirstName" value="#{participant.addFirstName}"></h:inputHidden>
									        <h:inputHidden id="addLastName" value="#{participant.addLastName}"></h:inputHidden>
		                                    </td>
											</tr>
											
										</table>
									</div>
								</div>
								<div class="modal-footer">
								     <button type="button" class="btn-danger" data-dismiss="modal">Close</button>
                                </div>
							</div>
						</div>
					</div>

				</div>
		
	
	 </h:form>	
	<script src="js/jquery-2.0.3.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/jquery.tablesorter.js"></script>
	<script src="js/bootstrap.js"></script> 
	<script src="js/vsp.js"></script>
	   <script>
         //<![CDATA[	
   	    
				$(document).ready(function(){
					//hide update and delete button on page load
					$("#updateButton").hide();
					$("#deleteButton").hide();
					//hide add user button on modal load
					$("#addPartBtn").hide();
					$("#participantResult").tablesorter();
					
			   });
	    //]]>
	</script>

	
	</ui:define>
	</ui:composition>

</h:body>
	
</html>

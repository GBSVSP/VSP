<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>

	<link href="css/bootstrap.css" rel="stylesheet"></link>
	<link href="css/bootstrap.min.css" rel="stylesheet"></link>
	<link href="css/bootstrap-responsive.css" rel="stylesheet"></link>
	<link href="css/site.css" rel="stylesheet"></link>
	<link href="css/base-admin-3.css" rel="stylesheet"></link>
	<link href="css/font-awesome.css" rel="stylesheet"></link>
	<link href="css/font-awesome.min.css" rel="stylesheet"></link>
	<link href="css/style.css" rel="stylesheet"></link>
</h:head>

<h:body>
	<script src="js/jquery-2.0.3.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/bootstrap.js"></script>

	<script type="text/javascript">
		function showDeleteDialogMsg() {

			//showCheckboxMessage(); 
			if (!confirm("Are you sure you want to delete the selected record(s)?"))
				return false;
			else
				return true;
		}

		function showUpdateDialogMsg() {
			if (!confirm("Are you sure you want to update the selected record(s)?"))
				return false;
			else
				return true;
		}
	</script>

	<ui:include src="commonHeader.xhtml" />

	<h:form id="userForm">
		<br></br>
		<br></br>
		<div align="center">
			<h:panelGrid columns="1">
				<h:message for="validationMsg" id="validationMsg" style="color:red"></h:message>
				<h:messages style="color:red"></h:messages>
			</h:panelGrid>


			<table border="0" width="80%">
				<tr bgcolor="grey">
					<td style="color: black; padding-left: 10px"><b>USER ADMIN</b></td>
					<td align="right" style="padding-top: 10px; padding-right: 10px">
						<p:inputText id="userSearch"
							placeholder="Search by Name,Email, IMT" size="20" />
					</td>
				</tr>
			</table>


			<h:panelGrid width="80%">
				<p:scrollPanel mode="native"
					style="width:1110px;height:320px;overflow:auto">
					<h:dataTable id="userResult" var="userData"
						value="#{user.allUserList}" styleClass="table table-striped">
						<h:column>
							<f:facet name="header">
								<h:selectBooleanCheckbox id="checkboxAllFlag"
									onchange="submit()" value="#{user.checkboxAllFlag}"
									valueChangeListener="#{user.valueChangeMethod}" />
							</f:facet>

							<h:selectBooleanCheckbox id="checkboxClickedFlag"
								value="#{userData.checkboxClickedFlag}" />
						#{userData.checkboxClickedFlag}
					</h:column>


						<h:column>
							<f:facet name="header"># </f:facet>
							<h:outputText id="serialNo" value="#{userData.serialNo}"></h:outputText>
						</h:column>

						<h:column>
							<f:facet name="header">Firstname</f:facet>
							<h:outputText value="#{userData.first_Name}"></h:outputText>

							<h:inputText id="firstname" value="#{userData.first_Name}"
								style="width:100px"
								rendered="#{user.toggleButton and userData.checkboxClickedFlag}"
								required="true" requiredMessage="FirstName cannot be empty">
								<f:validateRequired />
							</h:inputText>
						</h:column>

						<h:column>
							<f:facet name="header">Lastname</f:facet>
							<h:outputText value="#{userData.last_Name}"></h:outputText>

							<h:inputText id="lastname" value="#{userData.last_Name}"
								style="width:100px"
								rendered="#{user.toggleButton and userData.checkboxClickedFlag}"
								required="true" requiredMessage="LastName cannot be empty">
								<f:validateRequired />
							</h:inputText>
						</h:column>


						<h:column>
							<f:facet name="header">Email </f:facet>
							<h:outputText value="#{userData.email}"></h:outputText>
							<h:inputText id="email" value="#{userData.email}"
								style="width:140px"
								rendered="#{user.toggleButton and userData.checkboxClickedFlag}"
								required="true" requiredMessage="Email cannot be empty">
								<f:validateRequired />
							</h:inputText>
						</h:column>
						<h:column>
							<f:facet name="header">IMT </f:facet>

							<h:selectOneMenu id="imt_Id" value="#{userData.imt_Id}"
								required="true" requiredMessage="IMT cannot be null">
								<f:selectItem itemLabel="Please Choose" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems value="#{user.IMTList}" />
								<f:validateRequired />
							</h:selectOneMenu>
						</h:column>

						<h:column width="50">
							<f:facet name="header">Active </f:facet>
							<h:selectBooleanCheckbox id="active" value="#{userData.active}">
							</h:selectBooleanCheckbox>

						</h:column>


						<h:column>
							<f:facet name="header">Role </f:facet>
							<h:selectOneMenu id="role_Id" value="#{userData.role_Id}"
								required="true" requiredMessage="Role cannot be null">
								<f:selectItem itemLabel="Please Choose" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems value="#{user.roleList}" />
								<f:validateRequired />
							</h:selectOneMenu>
						</h:column>

					</h:dataTable>
				</p:scrollPanel>
				<hr></hr>
			</h:panelGrid>

			<h:panelGrid columns="6" width="80%">
				<h:commandButton id="newUserButton" value="+ New User"
					class="btn-default" style="float:center" action="#{user.addNewRow}"
					rendered="#{not user.toggleButton}"></h:commandButton>

				<h:panelGroup>
					<h:commandButton id="saveButton" value="Save User"
						class="btn-default" style="float:left" action="#{user.insertUser}"
						rendered="#{user.toggleButton}"></h:commandButton>


					<h:commandButton id="resetButton" value="Reset" class="btn-default"
						style="float:left" rendered="#{user.toggleButton}"></h:commandButton>

					<h:commandButton id="cancelButton" value="Cancel"
						class="btn-default" style="float:left"
						rendered="#{user.toggleButton}"></h:commandButton>
				</h:panelGroup>

				<h:panelGroup>
					<h:commandButton id="updateButton" value="Update User"
						class="btn-default" style="float:right"
						rendered="#{not user.toggleButton}" action="#{user.updateUser}"
						onclick="return showUpdateDialogMsg()"></h:commandButton>

					<h:commandButton id="deleteButton" value="Delete User"
						class="btn-default" style="float:right"
						rendered="#{not user.toggleButton}" action="#{user.deleteUser}"
						onclick="return showDeleteDialogMsg()"></h:commandButton>
				</h:panelGroup>
			</h:panelGrid>
		</div>


	</h:form>

	<ui:include src="commonFooter.xhtml" />

</h:body>

</html>
